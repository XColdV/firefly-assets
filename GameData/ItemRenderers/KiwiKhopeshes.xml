<?xml version="1.0" encoding="utf-8"?>
<ItemRenderer>
  <Data>
    <Sprite name="s_frontSword" fileName="game/player_cosmetics3.rttex" textureSize="32" frame="30,28"/>
    <Sprite name="s_backSword" fileName="game/player_cosmetics3.rttex" textureSize="32" frame="31,28"/>
    <Sprite name="sword_slash_Sprite" fileName="game/particles10.rttex" textureSize="32" frame="0,23"/>

    <Animations>
      <SpriteAnimation name="sword_slash_frames" autoPlay="false" sprite="sword_slash_Sprite">
        <Frame>0,23</Frame>
        <Frame>1,23</Frame>
      </SpriteAnimation>
    </Animations>

    <ParticleSystems>
      <ParticleSystem name="slash_particle">
        <Emitter>
          <Set name="offset">9,-18</Set>
          <Set name="emissionInterval">0.25</Set>
          <Set name="lifeTime">0.25</Set>
          <Set name="particlesPerEmission">1</Set>
          <Set name="particlesToEmit">1</Set>
        </Emitter>
        <Particle alternateSpriteFrameWithPunch="true">
          <Set name="sprite">sword_slash_Sprite</Set>
          <Set name="blendingMode">PREMULTIPLIED_ALPHA</Set>
          <Set name="lifeTime">0.4</Set>
          <Set name="rotateWithVelocity">true</Set>
          <Set name="interpolateAlpha">false</Set>
          <Set name="initialScale">1,1</Set>
          <Set name="initialAlpha">1</Set>
          <Set name="finalAlpha">1</Set>
          <Set name="interpolateVelocity">true</Set>
          <VectorTo name="initialVelocity" source="targetPos" duration="lifeTime" x="0.8" angle="0"/>
          <VectorTo name="finalVelocity" source="targetPos" duration="lifeTime" x="0.8" angle="0"/>
        </Particle>
      </ParticleSystem>
    </ParticleSystems>

    <RenderOptions>
      <Default>
        <Set name="PunchSoundOverride">HAND</Set>
        <Set name="PlayDefaultPunchAudio">false</Set>
        <Set name="RenderBackArmInfected">true</Set>
        <Set name="RenderFrontArmInfected">true</Set>
        <Set name="RenderBackArmBuild">true</Set>
        <Set name="IncludeAllActions">true</Set>
        <Set name="DefaultRenderMannequinHandItem">false</Set>
        <Set name="RenderFrontArmInTheFront">true</Set>
      </Default>
    </RenderOptions>
  </Data>

  <RenderRules>
    <RenderBackHandItem>
      <StopIf>
        <IsAction>BUILD</IsAction>
      </StopIf>
      <StopIf type="and">
        <IsZombified>true</IsZombified>
        <IsAction>PUNCH</IsAction>
      </StopIf>
      <Translate>4,5,0</Translate>
      <SpriteRender name="s_backSword" rotationPoint="0,1" alignment="CENTER" rotateOffset="true" blend="PREMULTIPLIED_ALPHA"/>
    </RenderBackHandItem>
    <RenderHandItem>
      <Translate>7.5,1.5,0</Translate>
      <SpriteRender name="s_frontSword" rotationPoint="0,1" alignment="UPPER_CENTER" blend="PREMULTIPLIED_ALPHA" />
    </RenderHandItem>
    <OnPunchStart>
      <StopIf>
        <IsZombified>true</IsZombified>
      </StopIf>
      <ParticleSystemUpdate name="slash_particle"/>
    </OnPunchStart>
    <OnPunchUpdate>
      <StopIf>
        <IsZombified>true</IsZombified>
      </StopIf>
      <AvatarTransform class="Face">
        <Set name="face">MAD</Set>
      </AvatarTransform>
      <AvatarTransform class="ArmAngle">
        <Set name="armName">arm1Angle</Set>
        <Set name="animTime">300</Set>
        <Set name="Curve">
          <KeyFrame>0, 0</KeyFrame>
          <KeyFrame>1, 360</KeyFrame>
        </Set>
      </AvatarTransform>
      <AvatarTransform class="ArmAngle">
        <Set name="armName">arm2Angle</Set>
        <Set name="animTime">300</Set>
        <Set name="Curve">
          <KeyFrame>0, 180</KeyFrame>
          <KeyFrame>1, 540</KeyFrame>
        </Set>
      </AvatarTransform>
    </OnPunchUpdate>
  </RenderRules>
</ItemRenderer>